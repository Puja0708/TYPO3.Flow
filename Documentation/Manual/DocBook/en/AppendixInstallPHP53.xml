<?xml version="1.0" encoding="UTF-8"?>
<appendix version="5.0" xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <title>Install PHP 5.3</title>

  <section>
    <title>Introduction</title>

    <para>PHP 5.3 is not released at the time this was written, so you won't
    find it in the mostly used operating systems. Here we will describe they
    way to install the most recent release candidate on three operating
    systems: Debian Linux (lenny), MacOS and Windows (XP and Vista).</para>

    <section>
      <title>Debian Linux (lenny)</title>

      <para>At the moment we are using the PHP 5.3 RC2 packages provided by
      dotdeb.org until PHP 5.3 gets into the normal stable release of Debian.
      You should not do this in your production environment, since you will
      overwrite your stable and tested PHP 5.2 packages!</para>

      <para>First the apt sources need to be expanded to get the dotdeb.org
      packages. To do that you have to edit your
      <emphasis>/etc/apt/sources.list</emphasis> and add these lines:</para>

      <para><code>deb http://php53.dotdeb.org stable all</code></para>

      <para><code>deb-src http://php53.dotdeb.org stable all</code></para>

      <para>After that you have to update aptitude's cache by</para>

      <para><command>aptitude update</command></para>

      <para>It may happen that your Debian installation already has PHP 5
      packages installed. You need to "upgrade" to get them updated with the
      ones by dotdeb.org:</para>

      <para><command>aptitude upgrade</command></para>

      <para>Now you are ready to install the required apache and php packages
      (don't mind if some of them are already installed, aptitude will handle
      that)</para>

      <para><command>aptitude install apache2.. libapache.. php5
      php5-sqlite...</command></para>

      <para>Start apache to check if it works:</para>

      <para><command>/etc/init.d/apache2 start</command></para>

      <para>Now point your web browser to <emphasis>http://&lt;ip or hostname
      of your server&gt;/</emphasis>. If everything is ok, you should see a
      simple "It works!".</para>

      <para>To get PHP 5 working, its module needs to get activated:</para>

      <para><command>a2enmod php5</command></para>

      <para><command>/etc/init.d/apache2 restart</command></para>

      <para>To check it, a simple phpinfo file needs to be created. Create an
      empty file named <filename>phpinfo.php</filename> under
      <filename>/var/www</filename> and add these lines to it:</para>

      <programlisting language="php">&lt;?php
phpinfo();
?&gt;</programlisting>

      <para>Notice the long PHP open tag. You have to use it, because the
      short open tag is switched off by default in php.ini! Point your browser
      to <emphasis>http://&lt;ip or hostname of your
      server&gt;/phpinfo.php</emphasis> and you should see a typical phpinfo
      output. Check if it shows the correct version PHP 5.3 RC2. After that
      you should delete the file.</para>

      <para>At this point you have a working LAMP environment with PHP 5.3, so
      FLOW3 can be installed.</para>

      <note>
        <para>For a comfortable and secure environment the DocRoot of apache's
        default webserver instance (or the vhost you are using) should be
        changed to the "Public" folder of FLOW3. If you use the default
        webserver edit
        <filename>/etc/apache2/sites-available/default</filename> and change
        every use of <filename>/var/www</filename> to
        <filename>/var/www/FLOW3/Public</filename>. Finally reload the
        webserver:</para>
      </note>
    </section>

    <section>
      <title>MacOS</title>

      <para>TODO</para>
    </section>

    <section>
      <title>Windows</title>

      <para>TODO:</para>

      <para>Based on xampp x.x:</para>

      <para>download, install</para>

      <para>PHP 5.3 on port 81: maybe just reference to wiki?</para>

      <para>Differences between XP/Vista? (bääh)</para>

      <para>Tip: Symlinks on Windows with... (Vista?)</para>
    </section>
  </section>
</appendix>
