#                                                                          #
# Object Configuration for the FLOW3 Framework                             #
#                                                                          #
# This file contains the default object configuration for the FLOW3        #
# Framework. Because it is loaded at a very early stage during ini-        #
# tialization, this configuration cannot be overriden by other con-        #
# figuration files.                                                        #
#                                                                          #

# @package FLOW3

DateTime:
  scope: prototype
  autowiring: off

#                                                                          #
# Cache                                                                    #
#                                                                          #

F3\FLOW3\Cache\CacheFactory:
  arguments:
    1:
      setting: FLOW3.context


#                                                                          #
# I18n                                                                     #
#                                                                          #

F3\FLOW3\I18n\Service:
  properties:
    cache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_I18n_AvailableLocalesCache
F3\FLOW3\I18n\Cldr\CldrModel:
  properties:
    cache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_I18n_Cldr_CldrModelCache
F3\FLOW3\I18n\Xliff\XliffModel:
  properties:
    cache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_I18n_XmlModelCache
F3\FLOW3\I18n\Cldr\Reader\DatesReader:
  properties:
    cache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_I18n_Cldr_Reader_DatesReaderCache
F3\FLOW3\I18n\Cldr\Reader\NumbersReader:
  properties:
    cache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_I18n_Cldr_Reader_NumbersReaderCache
F3\FLOW3\I18n\Cldr\Reader\PluralsReader:
  properties:
    cache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_I18n_Cldr_Reader_PluralsReaderCache

#                                                                          #
# Log                                                                      #
#                                                                          #

F3\FLOW3\Log\Backend\FileBackend:
  autowiring: off
F3\FLOW3\Log\Backend\NullBackend:
  autowiring: off
F3\FLOW3\Log\SystemLoggerInterface:
  scope: singleton
  factoryObjectName: F3\FLOW3\Log\LoggerFactory
  arguments:
    1:
      value: 'FLOW3_System'
    2:
      value: 'F3\FLOW3\Log\Logger'
    3:
      value: 'F3\FLOW3\Log\Backend\FileBackend'
    4:
      setting: FLOW3.log.systemLogger.backendOptions

F3\FLOW3\Log\SecurityLoggerInterface:
  scope: singleton
  factoryObjectName: F3\FLOW3\Log\LoggerFactory
  arguments:
    1:
      value: 'FLOW3_Security'
    2:
      value: 'F3\FLOW3\Log\Logger'
    3:
      value: 'F3\FLOW3\Log\Backend\FileBackend'
    4:
      setting: FLOW3.log.securityLogger.backendOptions

#                                                                          #
# Monitor                                                                  #
#                                                                          #

F3\FLOW3\Monitor\ChangeDetectionStrategy\ModificationTimeStrategy:
  properties:
    cache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_Monitor

F3\FLOW3\Monitor\FileMonitor:
  properties:
    cache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_Monitor

#                                                                          #
# MVC                                                                      #
#                                                                          #

F3\FLOW3\MVC\Web\Routing\Aspect\RouterCachingAspect:
  properties:
    findMatchResultsCache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_MVC_Web_Routing_FindMatchResults
    resolveCache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_MVC_Web_Routing_Resolve

#                                                                          #
# Object                                                                   #
#                                                                          #

F3\FLOW3\Object\ObjectManagerInterface:
  className: F3\FLOW3\Object\ObjectManager
  scope: singleton
  autowiring: off

F3\FLOW3\Object\ObjectManager:
  autowiring: off

F3\FLOW3\Object\CompileTimeObjectManager:
  autowiring: off

#                                                                          #
# Persistence                                                              #
#                                                                          #

Doctrine\Common\Persistence\ObjectManager:
  scope: singleton
  factoryObjectName: F3\FLOW3\Persistence\Doctrine\EntityManagerFactory

F3\FLOW3\Persistence\PersistenceManagerInterface:
  className: F3\FLOW3\Persistence\Doctrine\PersistenceManager

F3\FLOW3\Persistence\Doctrine\Logging\SqlLogger:
  properties:
    logger:
      object:
        factoryObjectName: F3\FLOW3\Log\LoggerFactory
        arguments:
          1:
            value: 'Sql_Queries'
          2:
            value: 'F3\FLOW3\Log\Logger'
          3:
            value: 'F3\FLOW3\Log\Backend\FileBackend'
          4:
            setting: FLOW3.log.sqlLogger.backendOptions

#                                                                          #
# Resource                                                                 #
#                                                                          #

F3\FLOW3\Resource\ResourceManager:
  properties:
    statusCache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_Resource_Status

F3\FLOW3\Resource\Publishing\ResourcePublishingTargetInterface:
  className: F3\FLOW3\Resource\Publishing\FileSystemPublishingTarget

#                                                                          #
# Security                                                                 #
#                                                                          #

F3\FLOW3\Security\Authentication\AuthenticationManagerInterface:
  className: F3\FLOW3\Security\Authentication\AuthenticationProviderManager


F3\FLOW3\Security\Cryptography\RsaWalletServiceInterface:
  className: F3\FLOW3\Security\Cryptography\RsaWalletServicePhp
  scope: singleton
  properties:
    keystoreCache:
      object:
        factoryObjectName: F3\FLOW3\Cache\CacheManager
        factoryMethodName: getCache
        arguments:
          1:
            value: FLOW3_Security_Cryptography_RSAWallet

F3\FLOW3\Security\Authorization\AccessDecisionManagerInterface:
  className: F3\FLOW3\Security\Authorization\AccessDecisionVoterManager

F3\FLOW3\Security\Authorization\FirewallInterface:
  className: F3\FLOW3\Security\Authorization\FilterFirewall

#                                                                          #
# Session                                                                  #
#                                                                          #

F3\FLOW3\Session\SessionInterface:
  className: F3\FLOW3\Session\PhpSession
  scope: singleton
  properties:
    settings:
      setting: FLOW3
    environment:
      object: F3\FLOW3\Utility\Environment

#                                                                          #
# Utility                                                                  #
#                                                                          #

F3\FLOW3\Utility\PdoHelper:
  autowiring: off
  scope: prototype
